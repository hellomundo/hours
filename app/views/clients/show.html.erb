<% provide(:title, @client.name + ' on Sequitur Clock') %>
<div class="row">
  <div class="large-6 columns">
    <h3><%= @client.name %></h3>
  </div>
</div>

<div class="row">
  <div class="large-6 columns">
    <%= @client.name %> <% if @client.is_active %>(Active)<% else %>(Inactive)<% end %>
  </div>
  <div class="large-6 columns">
    <%= link_to "Edit", edit_client_path(@client), class: "button" %> <%= link_to "Delete", client_path(@client), method: :delete, data: { confirm: 'Are you sure?' }, class: "button"  %> 
  </div>
</div>


<div class="row">
  <div class="large-12 columns">
    <table>
      <thead>
        <tr>
          <th>Project</th>
          <th>Hours</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
<% @projects.each do |project| %>
        <tr>
          <td><%= link_to project.name, client_project_path(@client, project) %></td>
          <td><%= duration_to_hours project.efforts.sum(:duration) %></td>
          <td><%= link_to "Delete", [@client, project], method: :delete, data: { confirm: 'Are you sure?' } %>  deactivate</td>
        </tr>
<% end %>
      </tbody>
    </table>
  </div>
</div>


<div class="row">
  <div class="large-6 columns">
    <h2>Add new project</h2>
    <%= form_for([@client, @client.projects.build]) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <%= f.label :name %>
      <%= f.text_field :name %>
      <%= f.label :start_date %>
      <%= f.date_field :start_date, :value => Time.now.strftime("%Y-%m-%d") %>

      <%= f.check_box :is_active %>
      <%= f.label :is_active %>
      
      <%= f.submit "Create project", class: "button [radius round]" %>
    <% end %>
  </div>
</div>